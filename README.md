# BACK-GO

Бекенд сервис на языке Go для проекта NECPGAME.

## Описание

Репозиторий `BACK-GO` содержит игровой сервер, обрабатывающий игровую логику, аутентификацию, базу данных и API для клиентских приложений.

## О проекте

**NECPGAME** - это MMORPG с элементами киберспортивного шутера, экстрактшутера и глубокой социальной структурой в стиле CYBERPUNK 2077.

### Жанры
- MMORPG
- Киберспортивный шутер
- Экстрактшутер
- Социальная игра

### Сеттинг
- **Стиль**: CYBERPUNK 2077
- **Лор**: CYBERPUNK

### Источники вдохновения

- **BALDUR GATE 3** - глубокая ролевая система и система ветвления мира. Огромная реиграбельность. Возможность делать выбор, который кардинально влияет на сюжет. Романтические отношения с персонажами.

- **CYBERPUNK 2077** - киберпанк атмосфера и лор. В этой вселенной будет игра. Механики мира и основной игры.

- **VALORANT** - киберспортивные элементы шутера. Супергеройский шутер с активными элементами. Навыки, которые появляются с экипировкой, имплантами или деревом прокачки.

- **TARKOV** - экстрактшутер механики.

- **ARC RAIDERS** - кооперативная игра в киберпанк сеттинге. Экстрактшутер механики. Элементы PvE со сложными врагами. Сложный PvE интеллект у мобов.

- **MINECRAFT** - свобода творчества и строительства. Гибкая система строительства, крафта, модинг инструменты.

- **WOW** - MMORPG масштаб и социальные механики. Глубокий лор, мировые события, расовые события, клановые события и т.д. Рейдовая система.

- **LINEAGE** - клановая система и PvP. Механики заточки, фентезийная стилистика.

- **EVE online** - экономика и масштабные конфликты. Глобальная экономика, политика и торговля. Огромные кланы и т.д.

- **KENSHI** - открытый мир и свобода действий. Мир, который живёт сам по себе. Сложная и глубокая прокачка навыков через боль. Мир живёт самостоятельно. Происходят глобальные события без игрока. Мир сам себя живёт.

- **The Witcher 3 Wild Hunt** - повествование и квесты. Глубокий лор. Возможность взаимодействовать с большим количеством персонажей. Романтические отношения с персонажами. Глубокая система зачарований и эффектов.

- **RIMWORLD** - социальные взаимодействия и события. Мир живет сам по себе. События происходят и без игрока. Глобальная экономика, торговля, взаимодействия фракций. Возможность модинга.

- **MEGABONK** - динамичный геймплей. Глобальный рейтинг, простая и доступная рейтинговая система.

- **OBLIVION** - RPG составляющая, магия, фракции, сюжеты академий магов, воров, убийц и т.д. Сюжет и RPG, живой мир.

- **SKYRIM** - RPG составляющая, магия, фракции, сюжеты академий магов, воров, убийц и т.д. Сюжет и RPG, живой мир.

## Стек технологий

### Язык и среда выполнения
- **Go 1.22+** - основной язык программирования (современная версия 2025)

### База данных
- **PostgreSQL 15+** - основная реляционная БД (современная версия)
- **pgx v5** - рекомендуемый драйвер для работы с PostgreSQL (высокая производительность)
- **GORM** - альтернативный ORM для работы с БД (если нужен ORM)
- **migrate** / **goose** - инструменты для миграций БД
- **Docker** - контейнеризация БД

### Веб-фреймворки и API
- **Gin** (рекомендуется) - высокопроизводительный HTTP веб-фреймворк
- **Echo** - альтернативный легковесный фреймворк
- **Fiber** - альтернативный фреймворк, вдохновленный Express.js
- **gRPC** - для внутренних микросервисов (при необходимости)
- **REST API** - для внешних вызовов
- **WebSocket** - для real-time коммуникации (Gorilla WebSocket)

### Инструменты разработки
- **gofmt** - форматирование кода (встроенный)
- **golangci-lint** (рекомендуется) - современный комплексный линтер с множеством правил
- **go vet** - статический анализ (встроенный)

### Логирование и мониторинг
- **zap** (рекомендуется) - структурированное логирование от Uber (высокая производительность)
- **logrus** - альтернативное логирование (проще в использовании)
- **Prometheus** / **Grafana** - мониторинг и метрики (при необходимости)
- **OpenTelemetry** - трейсинг и мониторинг (современный стандарт)

### Кеширование
- **Redis 7+** - кеширование данных (при необходимости)
- **go-redis** - клиент для Redis

### Валидация
- **validator** - валидация структур и данных
- **go-playground/validator** - популярная библиотека валидации

### Аутентификация и безопасность
- **golang-jwt/jwt** - работа с JWT токенами
- **bcrypt** - хеширование паролей
- **cors** - обработка CORS запросов

### Генерация кода
- **OpenAPI Generator** (рекомендуется) - генерация Go серверного кода из API-SWAGGER
- **Swagger Codegen** - альтернативный генератор

### Контейнеризация
- **Docker** - контейнеризация сервиса
- **Docker Compose** - оркестрация сервисов

### Тестирование
- **go test** - встроенный фреймворк тестирования
- **testify** - расширение для тестирования (assertions, mocks)
- **gomock** - генерация моков для тестирования

## Архитектура

- REST API для внешних клиентов
- gRPC для внутренних микросервисов (при необходимости)
- Middleware для обработки ошибок, логирования, аутентификации
- Graceful shutdown для корректного завершения работы
- Транзакции для критических операций
- Все данные хранятся в БД, ничего не хардкодится

## Миграции БД

Используются миграции для:
- Версионирования схемы БД
- Наполнения БД начальными данными
- Отката изменений при необходимости

## Разработка

### Запуск PostgreSQL в Docker

Для локальной разработки используется PostgreSQL в Docker контейнере.

**Запуск контейнера:**
```bash
# Запуск PostgreSQL контейнера
docker-compose up -d

# Проверка статуса
docker-compose ps

# Остановка контейнера
docker-compose down

# Остановка с удалением данных
docker-compose down -v
```

**Подключение к БД:**
- Host: `localhost`
- Port: `5432`
- User: `necpgame`
- Password: `necpgame`
- Database: `necpgame`

**Строка подключения:**
```
postgres://necpgame:necpgame@localhost:5432/necpgame?sslmode=disable
```

### Процесс разработки

1. Запуск PostgreSQL: `docker-compose up -d`
2. Генерация кода из API-SWAGGER спецификаций
3. Применение миграций БД
4. Реализация бизнес-логики
5. Написание тестов (покрытие не менее 50%)
6. Документирование кода
